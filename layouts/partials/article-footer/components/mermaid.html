{{- if .HasShortcode "mermaid" -}}
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ 
        startOnLoad: true,
        theme: document.documentElement.dataset.scheme === 'dark' ? 'dark' : 'default'
    });
</script>
{{- end -}}

{{- if findRE "```mermaid" .RawContent -}}
<script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
    mermaid.initialize({ 
        startOnLoad: true,
        theme: document.documentElement.dataset.scheme === 'dark' ? 'dark' : 'default'
    });
</script>
{{- end -}}
