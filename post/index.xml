<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Posts on Quang Hugo</title><link>https://quanghugo.pages.dev/post/</link><description>Recent content in Posts on Quang Hugo</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sat, 10 Jan 2026 02:30:00 +0000</lastBuildDate><atom:link href="https://quanghugo.pages.dev/post/index.xml" rel="self" type="application/rss+xml"/><item><title>Hi 2026</title><link>https://quanghugo.pages.dev/p/hi-2026/</link><pubDate>Fri, 02 Jan 2026 10:55:00 +0700</pubDate><guid>https://quanghugo.pages.dev/p/hi-2026/</guid><description>&lt;img src="https://quanghugo.pages.dev/p/hi-2026/cover.png" alt="Featured image of post Hi 2026" /&gt;&lt;h2 id="welcome-to-2026-"&gt;Welcome to 2026! üéâ
&lt;/h2&gt;&lt;p&gt;As the clock strikes midnight and we enter a new year, I feel filled with gratitude, excitement and anticipation for what lies ahead.
Welcome to 2026 - a fresh chapter, a blank canvas, and many opportunities to learn, grow, share and connect.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="reflecting-on-2025"&gt;Reflecting on 2025
&lt;/h2&gt;&lt;p&gt;Looking back at 2025, it&amp;rsquo;s been an incredible journey of growth, learning, and transformation. This past year has taught me valuable lessons:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Continuous Learning&lt;/strong&gt;: Technology never stops evolving, and neither should we. AI is a part of our daily working, it&amp;rsquo;s not just a tool for developers, it&amp;rsquo;s a tool for everyone. You can use ChapGPT for learning, explaining about the topic, lesson, etc. Gemini for generate images, videos, content, etc. Claude and Copilot for code and debugging, etc.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Community Matters&lt;/strong&gt;: The connections we build, the knowledge we share, and the support we give each other make all the difference.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Resilience&lt;/strong&gt;: Not every project goes as planned, not every bug gets fixed on the first try, but persistence always pays off.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Balance&lt;/strong&gt;: Finding harmony between coding, learning, and life is essential for long-term success and happiness.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Achievement&lt;/strong&gt;: I have completed 5/7 of my goals for 2025. For me, it was hard work, luck, and especially the support from my family, friends and co-workers.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&amp;rsquo;m grateful for every reader who visited this blog, every developer who shared their insights, and every challenge that pushed me to become better.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="what-2026-holds"&gt;What 2026 Holds
&lt;/h2&gt;&lt;p&gt;As I enter this new year, I&amp;rsquo;m setting intentions rather than rigid resolutions. Here&amp;rsquo;s what I&amp;rsquo;m excited to explore and share with you:&lt;/p&gt;
&lt;h3 id="-technical-deep-dives"&gt;üöÄ &lt;strong&gt;Technical Deep Dives&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;ll be diving deeper into cutting-edge technologies, distributed systems, cloud architecture, and modern development practices. Expect detailed tutorials, real-world case studies, and practical insights you can apply immediately.&lt;/p&gt;
&lt;h3 id="-problem-solving-chronicles"&gt;üí° &lt;strong&gt;Problem-Solving Chronicles&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;ll document my journey tackling complex technical challenges - the successes, the failures, and everything in between. Real problems, real solutions, real learning.&lt;/p&gt;
&lt;h3 id="-growth--learning"&gt;üå± &lt;strong&gt;Growth &amp;amp; Learning&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;From mastering new programming languages to exploring AI/ML, from system design to performance optimization - I&amp;rsquo;ll share my learning path so we can grow together.&lt;/p&gt;
&lt;h3 id="-community-engagement"&gt;ü§ù &lt;strong&gt;Community Engagement&lt;/strong&gt;
&lt;/h3&gt;&lt;p&gt;More interactive content, discussions, and opportunities to connect. Your feedback shapes this blog, and I want to hear more from you in 2026.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="a-message-for-you"&gt;A Message for You
&lt;/h2&gt;&lt;p&gt;If you&amp;rsquo;re reading this, whether you&amp;rsquo;re a seasoned developer or just starting your coding journey, I want you to know:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;You are capable of amazing things.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;2026 is your year to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Build that project you&amp;rsquo;ve been thinking about&lt;/li&gt;
&lt;li&gt;Learn that technology that intimidates you&lt;/li&gt;
&lt;li&gt;Contribute to open source&lt;/li&gt;
&lt;li&gt;Share your knowledge with others&lt;/li&gt;
&lt;li&gt;Take that career leap you&amp;rsquo;ve been contemplating&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Don&amp;rsquo;t let fear of failure hold you back. Every expert was once a beginner. Every successful project started with a single line of code. Every breakthrough came after countless attempts.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="lets-make-it-count"&gt;Let&amp;rsquo;s Make It Count
&lt;/h2&gt;&lt;p&gt;This year, I&amp;rsquo;m committing to:&lt;/p&gt;
&lt;p&gt;‚úÖ &lt;strong&gt;Consistency&lt;/strong&gt; - Regular, high-quality content that adds value&lt;br&gt;
‚úÖ &lt;strong&gt;Authenticity&lt;/strong&gt; - Sharing real experiences, including the messy parts&lt;br&gt;
‚úÖ &lt;strong&gt;Community&lt;/strong&gt; - Building connections and learning together&lt;br&gt;
‚úÖ &lt;strong&gt;Excellence&lt;/strong&gt; - Pushing boundaries and never settling for &amp;ldquo;good enough&amp;rdquo;&lt;/p&gt;
&lt;p&gt;I invite you to join me on this journey. Let&amp;rsquo;s make 2026 a year of growth, innovation, and meaningful impact.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="whats-coming-next"&gt;What&amp;rsquo;s Coming Next
&lt;/h2&gt;&lt;p&gt;In the upcoming posts, you can expect:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Deep technical tutorials&lt;/strong&gt; on modern development practices&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;System design insights&lt;/strong&gt; from real-world applications&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Performance optimization&lt;/strong&gt; techniques and case studies&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Career development&lt;/strong&gt; tips and lessons learned&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tool reviews&lt;/strong&gt; and productivity hacks&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Industry trends&lt;/strong&gt; and emerging technologies&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Stay tuned, stay curious, and stay passionate about what you do.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="final-thoughts"&gt;Final Thoughts
&lt;/h2&gt;&lt;p&gt;As we stand at the threshold of 2026, remember that every day is a new opportunity to learn, create, and grow. The journey of a thousand miles begins with a single step, and today is the perfect day to take that step.&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s to new challenges, new victories, and new friendships. Here&amp;rsquo;s to the code we&amp;rsquo;ll write, the problems we&amp;rsquo;ll solve, and the impact we&amp;rsquo;ll make.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Welcome to 2026. Let&amp;rsquo;s make it extraordinary together!&lt;/strong&gt; üöÄ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;What are your goals for 2026? What technologies are you excited to explore? Drop a comment below - I&amp;rsquo;d love to hear from you!&lt;/em&gt;&lt;/p&gt;</description></item><item><title>The Status Order Fail During Rolling Deployments - PART2</title><link>https://quanghugo.pages.dev/p/rolling-production-p2/</link><pubDate>Sat, 10 Jan 2026 02:30:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/rolling-production-p2/</guid><description>&lt;h2 id="the-problem-quick-recap"&gt;The Problem (Quick Recap)
&lt;/h2&gt;&lt;p&gt;In our &lt;strong&gt;&lt;a class="link" href="https://quanghugo.pages.dev/p/rolling-production-p1" &gt;previous article&lt;/a&gt;&lt;/strong&gt;, I explored a critical issue: when servers restart during deployment, in-memory timeout timers are lost, causing orders to get stuck in pending status indefinitely.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The scenario&lt;/strong&gt;: A customer places an order and the system starts a &lt;strong&gt;60s&lt;/strong&gt; timer. If payment isn&amp;rsquo;t confirmed within &lt;strong&gt;60s&lt;/strong&gt;, the order should automatically timeout. But if the server restarts at &lt;strong&gt;second 45&lt;/strong&gt;, that timer disappears‚Äîand the order &lt;em&gt;never times out&lt;/em&gt;. The customer sees &lt;strong&gt;&amp;ldquo;Order failed&amp;rdquo;&lt;/strong&gt; on their screen, but the backend still thinks the order is &lt;strong&gt;PENDING&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This creates confusion, duplicate orders, and requires manual cleanup.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="the-core-insight"&gt;The Core Insight
&lt;/h2&gt;&lt;p&gt;The problem isn&amp;rsquo;t with timers themselves‚Äîit&amp;rsquo;s where I store the timer information. When I store timeout information &lt;strong&gt;in the application&amp;rsquo;s memory&lt;/strong&gt;, it disappears when the application restarts.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;The solution? Move timeout tracking outside the application&lt;/strong&gt; into a shared storage system that survives restarts.&lt;/p&gt;
&lt;h3 id="the-calendar-analogy"&gt;The Calendar Analogy
&lt;/h3&gt;&lt;p&gt;Imagine two ways of tracking deadlines:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Old Approach (In-Memory Timer)&lt;/strong&gt;&lt;br&gt;
Each employee has a desk calendar. When they mark &amp;ldquo;Review document by &lt;strong&gt;3 PM&lt;/strong&gt;,&amp;rdquo; only they know about it. If they go home sick, no one else can see that deadline‚Äîit&amp;rsquo;s lost.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;New Approach (Shared Storage)&lt;/strong&gt;&lt;br&gt;
The team uses a shared wall calendar in the office. When anyone marks &amp;ldquo;Review document by &lt;strong&gt;3 PM&lt;/strong&gt;,&amp;rdquo; everyone can see it. If one person is &lt;strong&gt;unavailable&lt;/strong&gt;, someone else can check the calendar and handle the task.&lt;/p&gt;
&lt;p&gt;This is exactly what I&amp;rsquo;m doing: moving from individual &amp;ldquo;desk calendars&amp;rdquo; (&lt;strong&gt;in-memory timers&lt;/strong&gt;) to a &amp;ldquo;shared wall calendar&amp;rdquo; (&lt;strong&gt;Redis&lt;/strong&gt;) that all servers can access.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="the-solution-three-key-components"&gt;The Solution: Three Key Components
&lt;/h2&gt;&lt;p&gt;Our solution uses three simple concepts that work together:&lt;/p&gt;
&lt;h3 id="1-the-shared-timeout-list"&gt;1. The Shared Timeout List
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;What it is&lt;/strong&gt;: A shared list where I writes down every timeout and when it should happen, sorted by time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How it works&lt;/strong&gt;: When an order is created, instead of setting a timer in the server&amp;rsquo;s memory, I write to this shared list: &amp;ldquo;Order #12345 should timeout at 2:30:15 PM.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why it survives restarts&lt;/strong&gt;: This list lives in a database-like storage system (Redis) that&amp;rsquo;s separate from our application servers. When a &lt;strong&gt;server restarts, the list is still there&lt;/strong&gt;, untouched.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Analogy&lt;/strong&gt;: Like a shared to-do list on the wall, sorted by deadline. Everyone can see it, and it doesn&amp;rsquo;t disappear when someone leaves the room.&lt;/p&gt;
&lt;h3 id="2-the-worker-pattern"&gt;2. The Worker Pattern
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;What it is&lt;/strong&gt;: Every server regularly checks the shared timeout list to find tasks that are ready to be processed.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How it works&lt;/strong&gt;: Every second, each server asks: &lt;em&gt;&amp;ldquo;Are there any timeouts in the list that have already passed?&amp;rdquo;&lt;/em&gt; If it finds any, it processes them.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why it&amp;rsquo;s resilient&lt;/strong&gt;: If &lt;strong&gt;one server goes down, the other servers keep checking&lt;/strong&gt; the list. No single server is responsible for any specific timeout‚Äîthey all share the work.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Analogy&lt;/strong&gt;: Like multiple security guards on patrol. They all check the same checklist every few minutes. If one guard goes on break, the others keep checking‚Äînothing gets missed.&lt;/p&gt;
&lt;h3 id="3-the-lock-preventing-duplicates"&gt;3. The Lock (Preventing Duplicates)
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;What it is&lt;/strong&gt;: A mechanism to ensure only one server processes each timeout, even though multiple servers are checking the list.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How it works&lt;/strong&gt;: When &lt;strong&gt;Server A&lt;/strong&gt; sees an expired timeout, it tries to &lt;em&gt;&amp;ldquo;grab&amp;rdquo;&lt;/em&gt; it by placing a lock. If it succeeds, it processes the timeout. If &lt;strong&gt;Server B&lt;/strong&gt; tries to grab the same timeout a moment later, it &lt;strong&gt;sees the lock&lt;/strong&gt; and skips it‚Äîknowing &lt;strong&gt;Server A&lt;/strong&gt; is already handling it.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why it&amp;rsquo;s necessary&lt;/strong&gt;: Without locks, &lt;strong&gt;Server A and Server B might both process&lt;/strong&gt; the same timeout, sending two &amp;ldquo;Order timed out&amp;rdquo; notifications to the customer.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Analogy&lt;/strong&gt;: Like task cards on a Kanban board. When you start working on a task, you move the card to &lt;strong&gt;&amp;ldquo;In Progress&amp;rdquo;&lt;/strong&gt;.Other team members see it&amp;rsquo;s being worked on and don&amp;rsquo;t &lt;em&gt;duplicate&lt;/em&gt; the effort.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="how-it-all-works-together"&gt;How It All Works Together
&lt;/h2&gt;&lt;p&gt;Let&amp;rsquo;s walk through a complete timeout lifecycle:&lt;/p&gt;
&lt;pre class="mermaid"&gt;
flowchart TB
Order[Customer Places Order]
Write[Write to Shared List:&amp;lt;br/&amp;gt;Order 12345 timeout at 2:30 PM]
SharedList[(Shared Timeout List&amp;lt;br/&amp;gt;in Redis)]
Order --&amp;gt; Write
Write --&amp;gt; SharedList
subgraph AllServers[All Servers Working Together]
ServerA[Server A checks list&amp;lt;br/&amp;gt;every second]
ServerB[Server B checks list&amp;lt;br/&amp;gt;every second]
ServerC[Server C checks list&amp;lt;br/&amp;gt;every second]
end
SharedList -.-&amp;gt;|poll| ServerA
SharedList -.-&amp;gt;|poll| ServerB
SharedList -.-&amp;gt;|poll| ServerC
ServerA --&amp;gt; FindExpired[Found expired timeout:&amp;lt;br/&amp;gt;Order 12345]
FindExpired --&amp;gt; TryLock{Try to lock&amp;lt;br/&amp;gt;Order 12345}
TryLock --&amp;gt;|Lock successful| Process[Process timeout:&amp;lt;br/&amp;gt;Update order status&amp;lt;br/&amp;gt;Notify customer]
TryLock --&amp;gt;|Lock failed| Skip[Skip - another&amp;lt;br/&amp;gt;server handling it]
Process --&amp;gt; RemoveFromList[Remove from shared list]
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;Step-by-step explanation&lt;/strong&gt;:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Order Created&lt;/strong&gt;: Customer places Order &lt;strong&gt;#12345&lt;/strong&gt;. The system writes to the shared list: &amp;ldquo;Order #12345, &lt;strong&gt;timeout&lt;/strong&gt; at &lt;strong&gt;2:30:15 PM&lt;/strong&gt;&amp;rdquo;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Servers Monitor&lt;/strong&gt;: All servers (A, B, C) independently check the shared list every second, asking &lt;em&gt;&amp;ldquo;Any timeouts past their deadline?&amp;rdquo;&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Timeout Found&lt;/strong&gt;: At &lt;strong&gt;2:30:16 PM&lt;/strong&gt;, &lt;strong&gt;Server A&lt;/strong&gt; checks and finds Order &lt;em&gt;#12345&lt;/em&gt; is past its deadline (by 1 second)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Lock Attempt&lt;/strong&gt;: Server A tries to &lt;em&gt;&amp;ldquo;lock&amp;rdquo;&lt;/em&gt; Order &lt;strong&gt;#12345&lt;/strong&gt;. If successful, it proceeds. If another server locked it first, Server A skips it.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Process Timeout&lt;/strong&gt;: &lt;strong&gt;Server A&lt;/strong&gt; updates the order status to &lt;strong&gt;&amp;ldquo;Payment Timeout&amp;rdquo;&lt;/strong&gt; and sends a notification to the customer&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Clean Up&lt;/strong&gt;: Server A &lt;strong&gt;removes&lt;/strong&gt; Order &lt;strong&gt;#12345&lt;/strong&gt; from the shared list so no other server tries to process it&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
&lt;h2 id="what-happens-during-deployment"&gt;What Happens During Deployment
&lt;/h2&gt;&lt;p&gt;This is where the new approach really shines. Let&amp;rsquo;s compare the old and new systems during a rolling deployment:&lt;/p&gt;
&lt;h3 id="old-system-in-memory-timer"&gt;Old System: In-Memory Timer
&lt;/h3&gt;&lt;pre class="mermaid"&gt;
sequenceDiagram
participant Customer
participant ServerA
participant Kubernetes
participant Database
Customer-&amp;gt;&amp;gt;ServerA: Place order
ServerA-&amp;gt;&amp;gt;Database: Save order (Pending)
ServerA-&amp;gt;&amp;gt;ServerA: Start 60s timer&amp;lt;br/&amp;gt;in memory
Note over ServerA: Timer counting: 45s...44s...43s...
Kubernetes-&amp;gt;&amp;gt;ServerA: Deploy new version&amp;lt;br/&amp;gt;(restart server)
ServerA-&amp;gt;&amp;gt;ServerA: Server shuts down
Note over ServerA: ‚ùå Timer lost!
Note over Database: Order stuck in Pending
Note over Customer: App shows timeout&amp;lt;br/&amp;gt;but backend is inconsistent
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;What goes wrong&lt;/strong&gt;: The timer lives only in &lt;strong&gt;Server A&amp;rsquo;s memory&lt;/strong&gt;. When Server A &lt;strong&gt;restarts&lt;/strong&gt;, the timer is &lt;strong&gt;gone&lt;/strong&gt;. Order &lt;em&gt;#12345 never times ou&lt;/em&gt;t.&lt;/p&gt;
&lt;h3 id="new-system-shared-timeout-list"&gt;New System: Shared Timeout List
&lt;/h3&gt;&lt;pre class="mermaid"&gt;
sequenceDiagram
participant Customer
participant ServerA
participant SharedList as Shared Timeout List
participant Kubernetes
participant ServerB
participant Database
Customer-&amp;gt;&amp;gt;ServerA: Place order
ServerA-&amp;gt;&amp;gt;Database: Save order (Pending)
ServerA-&amp;gt;&amp;gt;SharedList: Write: Order 12345&amp;lt;br/&amp;gt;timeout at 2:30 PM
Note over SharedList: ‚úì Stored safely
Kubernetes-&amp;gt;&amp;gt;ServerA: Deploy new version&amp;lt;br/&amp;gt;(restart server)
ServerA-&amp;gt;&amp;gt;ServerA: Server shuts down
Note over SharedList: ‚úì List still intact!
ServerB-&amp;gt;&amp;gt;SharedList: Check for expired timeouts
SharedList--&amp;gt;&amp;gt;ServerB: Order 12345 expired
ServerB-&amp;gt;&amp;gt;ServerB: Lock and process timeout
ServerB-&amp;gt;&amp;gt;Database: Update order (Timeout)
ServerB-&amp;gt;&amp;gt;Customer: Notify: Payment timeout
ServerB-&amp;gt;&amp;gt;SharedList: Remove Order 12345
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;What goes right&lt;/strong&gt;: The timeout information lives in the shared list, &lt;em&gt;not in Server A&amp;rsquo;s memory&lt;/em&gt;. When Server A restarts, Server B (still running) finds the expired timeout and processes it. The customer gets the correct notification, and the order status is updated properly.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="trade-offs-and-considerations"&gt;Trade-offs and Considerations
&lt;/h2&gt;&lt;p&gt;No solution is perfect. Here&amp;rsquo;s what I gained and what I accepted:&lt;/p&gt;
&lt;h3 id="-benefits"&gt;‚úÖ Benefits
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Reliability&lt;/strong&gt;: Timeouts survive server restarts. During deployments, maintenance, or unexpected crashes, no timeout is lost.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Scalability&lt;/strong&gt;: Works across any number of servers. Adding more servers means more workers checking the list‚Äîbetter throughput.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Consistency&lt;/strong&gt;: The system state stays consistent. No more &amp;ldquo;ghost orders&amp;rdquo; that customers think failed but are still active in the backend.&lt;/p&gt;
&lt;h3 id="-trade-offs"&gt;‚öñÔ∏è Trade-offs
&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;Small Processing Delay&lt;/strong&gt;: Instead of processing timeouts at exactly 60.000 seconds, I process them within ~61 seconds (60 seconds + up to 1 second for the worker to check the list).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Why it&amp;rsquo;s acceptable&lt;/strong&gt;: For a 60-second timeout, a 1-second variance is imperceptible to customers. The business requirement is &amp;ldquo;notify within reasonable time,&amp;rdquo; not &amp;ldquo;exactly at 60 seconds.&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Dependency on Shared Storage&lt;/strong&gt;: The system now depends on Redis (the shared storage) being available.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Why it&amp;rsquo;s acceptable&lt;/strong&gt;: Redis is already a critical component for many features (caching, sessions). It&amp;rsquo;s highly reliable with built-in redundancy. If Redis goes down, I have bigger problems than timeouts.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Eventual Processing&lt;/strong&gt;: There&amp;rsquo;s a brief window where a timeout has technically expired but hasn&amp;rsquo;t been processed yet (while waiting for the next worker check).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Why it&amp;rsquo;s acceptable&lt;/strong&gt;: The database check is idempotent‚Äîbefore processing, I verify the order is still in &lt;strong&gt;PENDING&lt;/strong&gt; status. If a payment came through at the last second, I skip the timeout.&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="real-world-impact"&gt;Real-World Impact
&lt;/h2&gt;&lt;p&gt;After deploying this solution to production:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Metric&lt;/th&gt;
&lt;th&gt;Before (In-Memory)&lt;/th&gt;
&lt;th&gt;After (Shared List)&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Orders stuck during deployment&lt;/td&gt;
&lt;td&gt;5-10 per day&lt;/td&gt;
&lt;td&gt;0&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Average delay for stuck orders&lt;/td&gt;
&lt;td&gt;2-5 minutes&lt;/td&gt;
&lt;td&gt;N/A&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Manual cleanup required&lt;/td&gt;
&lt;td&gt;Daily&lt;/td&gt;
&lt;td&gt;Never&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Customer complaints about &amp;ldquo;ghost orders&amp;rdquo;&lt;/td&gt;
&lt;td&gt;Weekly&lt;/td&gt;
&lt;td&gt;None&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Timeout processing accuracy&lt;/td&gt;
&lt;td&gt;Exact (but fails on restart)&lt;/td&gt;
&lt;td&gt;Within 1 second (always works)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The numbers speak for themselves. The small trade-off (1-second delay) is completely invisible to users, while the benefit (zero stuck orders) dramatically improves both user experience and operational efficiency.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="key-takeaways"&gt;Key Takeaways
&lt;/h2&gt;&lt;p&gt;This solution teaches us several important principles that apply beyond just timeout handling:&lt;/p&gt;
&lt;h3 id="1-persistent-state-survives-restarts"&gt;1. Persistent State Survives Restarts
&lt;/h3&gt;&lt;p&gt;When critical information lives only in application memory, it disappears during restarts. Moving it to external, persistent storage makes it durable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applies to&lt;/strong&gt;: Background jobs, scheduled tasks, workflow state, temporary data that users depend on.&lt;/p&gt;
&lt;h3 id="2-shared-storage-enables-distributed-work"&gt;2. Shared Storage Enables Distributed Work
&lt;/h3&gt;&lt;p&gt;When multiple servers can see the same work queue, they can share the load and provide redundancy. If one fails, others pick up the slack.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applies to&lt;/strong&gt;: Task queues, job scheduling, event processing, any work that can be distributed.&lt;/p&gt;
&lt;h3 id="3-locks-prevent-duplicate-processing"&gt;3. Locks Prevent Duplicate Processing
&lt;/h3&gt;&lt;p&gt;In distributed systems where multiple workers process the same queue, coordination (locks) ensures each item is processed exactly once.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applies to&lt;/strong&gt;: Payment processing, notification sending, any operation that shouldn&amp;rsquo;t happen twice.&lt;/p&gt;
&lt;h3 id="4-small-delays-are-often-acceptable"&gt;4. Small Delays Are Often Acceptable
&lt;/h3&gt;&lt;p&gt;Perfect timing (exactly 60.000 seconds) often isn&amp;rsquo;t necessary. &amp;ldquo;Close enough&amp;rdquo; (60-61 seconds) is usually fine if it makes the system more reliable.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applies to&lt;/strong&gt;: Most user-facing features prioritize reliability over microsecond precision.&lt;/p&gt;
&lt;h3 id="5-idempotency-handles-edge-cases"&gt;5. Idempotency Handles Edge Cases
&lt;/h3&gt;&lt;p&gt;By checking current state before acting (&amp;quot;&lt;em&gt;Is the order still pending?&lt;/em&gt;&amp;quot;), the system gracefully handles race conditions and ensures consistency even if something processes twice.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Applies to&lt;/strong&gt;: Any distributed operation, retry logic, eventual consistency scenarios.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="conclusion"&gt;Conclusion
&lt;/h2&gt;&lt;p&gt;The journey from in-memory timers to shared timeout lists teaches a broader lesson: &lt;strong&gt;in distributed systems, shared persistent state is more reliable than isolated in-memory state&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;While the old approach (spawn a thread, sleep, execute callback) is simpler to code, it breaks down under real-world conditions: deployments, restarts, scaling up or down. The new approach requires more infrastructure (Redis, workers, locks) but handles these conditions gracefully.&lt;/p&gt;
&lt;p&gt;For systems running in production‚Äîespecially in containerized environments like Kubernetes where restarts are routine‚Äîthis architectural pattern is essential. Whether you&amp;rsquo;re building e-commerce, ride-sharing, job scheduling, or any system with time-dependent logic, the same principles apply:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Persist critical state&lt;/strong&gt; outside your application&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Distribute the work&lt;/strong&gt; across multiple workers&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Coordinate with locks&lt;/strong&gt; to prevent duplicates&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Accept small delays&lt;/strong&gt; for much better reliability&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The result is a system that works consistently, even when individual servers come and go‚Äîwhich is exactly what modern cloud infrastructure demands.&lt;/p&gt;</description></item><item><title>The Status Order Fail During Rolling Deployments - PART1</title><link>https://quanghugo.pages.dev/p/rolling-production-p1/</link><pubDate>Tue, 30 Dec 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/rolling-production-p1/</guid><description>&lt;h2 id="the-problem"&gt;The Problem
&lt;/h2&gt;&lt;p&gt;Systems that rely on in-memory timeout mechanisms can encounter critical issues during rolling deployments. When a deployment occurs while timeout operations are in progress, these operations may be terminated before completion, leading to state inconsistencies and system failures.&lt;/p&gt;
&lt;p&gt;Consider, for example, an e-commerce order processing system. When a customer places an order, the system attempts to process their payment confirmation. The system enforces a strict 60-second timeout window to receive payment confirmation. If payment confirmation is not received within this timeframe, the system should automatically return a &amp;ldquo;Payment Timeout&amp;rdquo; response and update the order status accordingly.&lt;/p&gt;
&lt;p&gt;Under normal operating conditions, this mechanism works perfectly. However, during rolling deployments, some orders may exceed their timeout limits by 2-3x, creating a dangerous inconsistency between what the client displayed and the actual backend state. Orders that should have timed out after 60 seconds may remain in a &lt;strong&gt;PENDING_PAYMENT&lt;/strong&gt; status for 120-180 seconds, causing inconsistent system behavior and user confusion.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="understanding-the-system-architecture"&gt;Understanding the System Architecture
&lt;/h2&gt;&lt;h3 id="virtual-threads-overview"&gt;Virtual Threads Overview
&lt;/h3&gt;&lt;p&gt;Many systems leverage &lt;strong&gt;Java Virtual Threads&lt;/strong&gt; (introduced in Java 19 as a preview and finalized in Java 21) to handle timeout mechanisms efficiently. Virtual threads are lightweight threads managed by the Java Virtual Machine, allowing applications to create millions of threads without the overhead of traditional platform threads.&lt;/p&gt;
&lt;p&gt;For timeout implementations, systems typically spawn a virtual thread that sleeps for the duration of the timeout period (e.g., 60 seconds). When the timeout expires, the thread executes a callback function that handles the timeout scenario.&lt;/p&gt;
&lt;h3 id="the-timeout-mechanism"&gt;The Timeout Mechanism
&lt;/h3&gt;&lt;p&gt;To illustrate this, let&amp;rsquo;s examine an e-commerce order processing system. In such a system, the timeout flow works as follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Order Creation&lt;/strong&gt;: When a customer places an order, the system creates an order record with status &lt;code&gt;PENDING_PAYMENT&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Timer Initialization&lt;/strong&gt;: A virtual thread is spawned to handle the timeout countdown&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Payment Processing&lt;/strong&gt;: The system attempts to process and confirm the payment&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Success Path&lt;/strong&gt;: If payment is confirmed, the timer thread is interrupted and the order status is updated to &lt;code&gt;CONFIRMED&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Timeout Path&lt;/strong&gt;: If payment confirmation is not received within 60 seconds, the timer thread executes the timeout callback, updating the order status to &lt;code&gt;PAYMENT_TIMEOUT&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This design works reliably in stable environments, but reveals a critical flaw during deployment scenarios.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="the-deployment-failure-scenario"&gt;The Deployment Failure Scenario
&lt;/h2&gt;&lt;p&gt;During a rolling deployment in Kubernetes, systems using in-memory timeout mechanisms can experience failures. Consider a scenario where an e-commerce system is processing orders during a deployment. The following sequence of events occurs:&lt;/p&gt;
&lt;pre class="mermaid"&gt;
sequenceDiagram
participant User as Customer
participant Pod as Service Pod
participant K8s as Kubernetes
participant DB as Database
User-&amp;gt;&amp;gt;Pod: Place order request
Pod-&amp;gt;&amp;gt;DB: Create order (PENDING_PAYMENT)
Pod-&amp;gt;&amp;gt;Pod: Spawn virtual thread&amp;lt;br/&amp;gt;sleep(60s) ‚Üí timeout callback
Note over Pod: Timer counting: 59s, 58s, 57s...
K8s-&amp;gt;&amp;gt;Pod: SIGTERM signal
Pod-&amp;gt;&amp;gt;Pod: JVM shutdown initiated
Pod-&amp;gt;&amp;gt;Pod: All threads terminated
Note over Pod: Timeout thread killed&amp;lt;br/&amp;gt;before callback executes
Pod-&amp;gt;&amp;gt;DB: Pod terminates
Note over DB: Order remains in PENDING_PAYMENT state
Note over User: Client shows timeout&amp;lt;br/&amp;gt;Backend still waiting
&lt;/pre&gt;
&lt;h3 id="what-happens-during-rolling-deployment"&gt;What Happens During Rolling Deployment
&lt;/h3&gt;&lt;p&gt;In an e-commerce system, this failure scenario unfolds as follows:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;Normal Operation&lt;/strong&gt;: An order is created and a virtual thread starts the 60-second countdown&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Deployment Triggered&lt;/strong&gt;: Kubernetes initiates a rolling deployment, sending a &lt;code&gt;SIGTERM&lt;/code&gt; signal to the pod&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;JVM Shutdown&lt;/strong&gt;: The Java Virtual Machine begins its shutdown sequence&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Thread Termination&lt;/strong&gt;: All threads, including the timeout virtual thread, are terminated immediately&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Callback Never Executes&lt;/strong&gt;: The timeout callback that should update the order status never fires&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;State Inconsistency&lt;/strong&gt;: The order remains in &lt;code&gt;PENDING_PAYMENT&lt;/code&gt; status indefinitely, while the client has already shown a timeout error&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="code-example"&gt;Code Example
&lt;/h3&gt;&lt;p&gt;An example implementation in an e-commerce system might look like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;span class="lnt"&gt;11
&lt;/span&gt;&lt;span class="lnt"&gt;12
&lt;/span&gt;&lt;span class="lnt"&gt;13
&lt;/span&gt;&lt;span class="lnt"&gt;14
&lt;/span&gt;&lt;span class="lnt"&gt;15
&lt;/span&gt;&lt;span class="lnt"&gt;16
&lt;/span&gt;&lt;span class="lnt"&gt;17
&lt;/span&gt;&lt;span class="lnt"&gt;18
&lt;/span&gt;&lt;span class="lnt"&gt;19
&lt;/span&gt;&lt;span class="lnt"&gt;20
&lt;/span&gt;&lt;span class="lnt"&gt;21
&lt;/span&gt;&lt;span class="lnt"&gt;22
&lt;/span&gt;&lt;span class="lnt"&gt;23
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-java" data-lang="java"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;public&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;createOrder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;OrderRequest&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Create order in database&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;order&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;orderRepository&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;save&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Order&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PENDING_PAYMENT&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Spawn virtual thread for timeout&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ofVirtual&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;60_000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// 60 seconds&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handlePaymentTimeout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getId&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;catch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterruptedException&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Payment confirmed, timer interrupted - this is the happy path&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;currentThread&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;interrupt&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;});&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// Attempt to process payment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;processPaymentConfirmation&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getId&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;private&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;handlePaymentTimeout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Long&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;orderId&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;// This callback never executes if pod is killed during deployment&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;orderRepository&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;updateStatus&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;orderId&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;PAYMENT_TIMEOUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;The critical issue is that &lt;code&gt;handlePaymentTimeout()&lt;/code&gt; never executes if the JVM is terminated before the 60-second sleep completes. This problem is not unique to e-commerce systems‚Äîany system relying on in-memory timeout mechanisms faces the same risk.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="why-this-is-dangerous"&gt;Why This Is Dangerous
&lt;/h2&gt;&lt;p&gt;This failure mode creates a dangerous inconsistency between client and server states. For instance, in an e-commerce system, this might manifest as:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Client View&lt;/th&gt;
&lt;th&gt;Backend Reality&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Shows &amp;ldquo;Order failed&amp;rdquo; or timeout error&lt;/td&gt;
&lt;td&gt;Order still in &lt;code&gt;PENDING_PAYMENT&lt;/code&gt; status&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;User creates a new order&lt;/td&gt;
&lt;td&gt;Original order still active in database&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;User assumes order failed&lt;/td&gt;
&lt;td&gt;System still waiting for payment confirmation&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Payment confirmed late (after timeout)&lt;/td&gt;
&lt;td&gt;Conflict: order already considered failed by client&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="real-world-impact"&gt;Real-World Impact
&lt;/h3&gt;&lt;p&gt;This inconsistency leads to several critical problems across different system types. As an example, in an e-commerce system:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Ghost Orders&lt;/strong&gt;: Orders that appear failed to users but remain active in the system&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Double Payment Processing&lt;/strong&gt;: A payment might be confirmed for an order that the user believes has already failed, leading to confusion&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Data Integrity Issues&lt;/strong&gt;: The system state becomes inconsistent, making it difficult to track actual order status&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;User Trust Erosion&lt;/strong&gt;: Users experience unreliable behavior, damaging confidence in the platform&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Debugging Complexity&lt;/strong&gt;: Production issues become difficult to trace because the failure is silent and state-dependent&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Similar issues can occur in any system that relies on in-memory timeout mechanisms‚Äîride-sharing platforms, job scheduling systems, booking systems, and more all face the same fundamental risk.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="root-cause-analysis"&gt;Root Cause Analysis
&lt;/h2&gt;&lt;p&gt;The fundamental problem is architectural: &lt;strong&gt;systems that rely entirely on in-memory timeout mechanisms lack persistence or recovery strategy&lt;/strong&gt;.&lt;/p&gt;
&lt;h3 id="key-issues"&gt;Key Issues
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No State Persistence&lt;/strong&gt;: The timeout state exists only in memory. When the JVM terminates, this state is lost forever.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No Graceful Shutdown Handling&lt;/strong&gt;: Applications don&amp;rsquo;t handle shutdown signals to complete pending timeout operations before termination.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;No Recovery Mechanism&lt;/strong&gt;: There&amp;rsquo;s no background process to detect and recover operations that should have timed out but didn&amp;rsquo;t. In an e-commerce system, for example, orders that should have timed out remain in an intermediate state.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Tight Coupling&lt;/strong&gt;: The timeout logic is tightly coupled to the application lifecycle. When the application dies, the timeout dies with it.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="why-virtual-threads-dont-help-here"&gt;Why Virtual Threads Don&amp;rsquo;t Help Here
&lt;/h3&gt;&lt;p&gt;While virtual threads are excellent for handling many concurrent operations efficiently, they don&amp;rsquo;t solve the fundamental problem of persistence. Virtual threads are still in-memory constructs that disappear when the JVM terminates. The solution requires moving the timeout mechanism outside of the application&amp;rsquo;s memory space.&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="the-solution-persistent-timeout-mechanism"&gt;The Solution: Persistent Timeout Mechanism
&lt;/h2&gt;&lt;p&gt;In our next article, we&amp;rsquo;ll explore how to solve this problem by implementing a &lt;strong&gt;persistent timeout mechanism using Redis Sorted Sets (ZSET)&lt;/strong&gt; combined with a &lt;strong&gt;recovery worker pattern&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;This approach ensures that:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Timeout state is persisted outside the application memory&lt;/li&gt;
&lt;li&gt;Timeouts survive pod restarts and deployments&lt;/li&gt;
&lt;li&gt;A dedicated worker process can recover and process missed timeouts&lt;/li&gt;
&lt;li&gt;Systems maintain consistency even during infrastructure changes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The solution leverages Redis ZSET&amp;rsquo;s ability to store timeout timestamps as scores, allowing efficient querying of expired timeouts, while a background worker continuously processes these timeouts regardless of which pod originally created them. This pattern applies to e-commerce systems, ride-sharing platforms, job schedulers, and any other system requiring reliable timeout handling.&lt;/p&gt;
&lt;p&gt;Stay tuned for the detailed implementation in the next post!&lt;/p&gt;</description></item><item><title>Hello World</title><link>https://quanghugo.pages.dev/p/hello-world/</link><pubDate>Mon, 29 Dec 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/hello-world/</guid><description>&lt;p&gt;Welcome to my &lt;strong&gt;&lt;em&gt;new blog&lt;/em&gt;&lt;/strong&gt; about technical exploration! Here, I will share my learning journey about the tech world around us. Whether you&amp;rsquo;re a seasoned developer or just starting out, I hope this space becomes a valuable resource for learning, inspiration, and technical discussions.&lt;/p&gt;
&lt;h2 id="what-ill-do-at-wang-tech"&gt;What I&amp;rsquo;ll do at Wang-tech
&lt;/h2&gt;&lt;h3 id="learning-process"&gt;&lt;strong&gt;Learning process&lt;/strong&gt;:
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;ll document my journey of mastering new technologies, frameworks, and programming languages. This includes tutorials, step-by-step guides, common pitfalls I encounter, and how I overcome challenges. Expect detailed explanations, code examples, and practical tips that you can apply to your own projects.&lt;/p&gt;
&lt;h3 id="new-technology"&gt;&lt;strong&gt;New Technology&lt;/strong&gt;:
&lt;/h3&gt;&lt;p&gt;I&amp;rsquo;ll explore cutting-edge technologies, tools, and trends in the software development world. From AI and machine learning to cloud computing, microservices architecture, and modern web frameworks - I&amp;rsquo;ll dive deep into what makes these technologies exciting and how they can be leveraged in real-world applications.&lt;/p&gt;
&lt;h3 id="my-tech-life"&gt;&lt;strong&gt;My tech-life&lt;/strong&gt;:
&lt;/h3&gt;&lt;p&gt;Beyond just technical content, I&amp;rsquo;ll share insights from my daily life as a developer. This includes project experiences, lessons learned from building applications, code reviews, debugging adventures, and reflections on best practices. You&amp;rsquo;ll get a glimpse into the real-world challenges and triumphs of software development.&lt;/p&gt;
&lt;h2 id="whats-next"&gt;What&amp;rsquo;s next
&lt;/h2&gt;&lt;p&gt;As I embark on this blogging journey, I&amp;rsquo;m excited to share my upcoming adventures:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Project walkthroughs&lt;/strong&gt;: Real-world applications from concept to deployment&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Tech stack comparisons&lt;/strong&gt;: When to use what technology and why&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Problem-solving sessions&lt;/strong&gt;: Breaking down complex technical challenges&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Industry insights&lt;/strong&gt;: Trends, best practices, and lessons from the field&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Community engagement&lt;/strong&gt;: Discussions, Q&amp;amp;As, and collaborative learning&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&amp;rsquo;m looking forward to connecting with fellow developers and tech enthusiasts. Your feedback and suggestions will help shape the direction of this blog. Together, we can build a community that thrives on knowledge sharing and continuous improvement.&lt;/p&gt;
&lt;p&gt;Thank you for joining me on this journey. Let&amp;rsquo;s explore the fascinating world of technology together!&lt;/p&gt;</description></item><item><title>Markdown Syntax Guide</title><link>https://quanghugo.pages.dev/p/markdown-syntax-guide/</link><pubDate>Sun, 07 Sep 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/markdown-syntax-guide/</guid><description>&lt;p&gt;This article offers a sample of basic Markdown syntax that can be used in Hugo content files, also it shows whether basic HTML elements are decorated with CSS in a Hugo theme.&lt;/p&gt;
&lt;h2 id="headings"&gt;Headings
&lt;/h2&gt;&lt;p&gt;The following HTML &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt;‚Äî&lt;code&gt;&amp;lt;h6&amp;gt;&lt;/code&gt; elements represent six levels of section headings. &lt;code&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; is the highest section level while &lt;code&gt;&amp;lt;h6&amp;gt;&lt;/code&gt; is the lowest.&lt;/p&gt;
&lt;h1 id="h1"&gt;H1
&lt;/h1&gt;&lt;h2 id="h2"&gt;H2
&lt;/h2&gt;&lt;h3 id="h3"&gt;H3
&lt;/h3&gt;&lt;h4 id="h4"&gt;H4
&lt;/h4&gt;&lt;h5 id="h5"&gt;H5
&lt;/h5&gt;&lt;h6 id="h6"&gt;H6
&lt;/h6&gt;&lt;h2 id="paragraph"&gt;Paragraph
&lt;/h2&gt;&lt;p&gt;Xerum, quo qui aut unt expliquam qui dolut labo. Aque venitatiusda cum, voluptionse latur sitiae dolessi aut parist aut dollo enim qui voluptate ma dolestendit peritin re plis aut quas inctum laceat est volestemque commosa as cus endigna tectur, offic to cor sequas etum rerum idem sintibus eiur? Quianimin porecus evelectur, cum que nis nust voloribus ratem aut omnimi, sitatur? Quiatem. Nam, omnis sum am facea corem alique molestrunt et eos evelece arcillit ut aut eos eos nus, sin conecerem erum fuga. Ri oditatquam, ad quibus unda veliamenimin cusam et facea ipsamus es exerum sitate dolores editium rerore eost, temped molorro ratiae volorro te reribus dolorer sperchicium faceata tiustia prat.&lt;/p&gt;
&lt;p&gt;Itatur? Quiatae cullecum rem ent aut odis in re eossequodi nonsequ idebis ne sapicia is sinveli squiatum, core et que aut hariosam ex eat.&lt;/p&gt;
&lt;h2 id="blockquotes"&gt;Blockquotes
&lt;/h2&gt;&lt;p&gt;The blockquote element represents content that is quoted from another source, optionally with a citation which must be within a &lt;code&gt;footer&lt;/code&gt; or &lt;code&gt;cite&lt;/code&gt; element, and optionally with in-line changes such as annotations and abbreviations.&lt;/p&gt;
&lt;h3 id="blockquote-without-attribution"&gt;Blockquote without attribution
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Tiam, ad mint andaepu dandae nostion secatur sequo quae.
&lt;strong&gt;Note&lt;/strong&gt; that you can use &lt;em&gt;Markdown syntax&lt;/em&gt; within a blockquote.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="blockquote-with-attribution"&gt;Blockquote with attribution
&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Don&amp;rsquo;t communicate by sharing memory, share memory by communicating.&lt;br&gt;
‚Äî &lt;cite&gt;Rob Pike&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/cite&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="tables"&gt;Tables
&lt;/h2&gt;&lt;p&gt;Tables aren&amp;rsquo;t part of the core Markdown spec, but Hugo supports supports them out-of-the-box.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Name&lt;/th&gt;
&lt;th&gt;Age&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Bob&lt;/td&gt;
&lt;td&gt;27&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Alice&lt;/td&gt;
&lt;td&gt;23&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="inline-markdown-within-tables"&gt;Inline Markdown within tables
&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Italics&lt;/th&gt;
&lt;th&gt;Bold&lt;/th&gt;
&lt;th&gt;Code&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;em&gt;italics&lt;/em&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;bold&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;code&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;A&lt;/th&gt;
&lt;th&gt;B&lt;/th&gt;
&lt;th&gt;C&lt;/th&gt;
&lt;th&gt;D&lt;/th&gt;
&lt;th&gt;E&lt;/th&gt;
&lt;th&gt;F&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit.&lt;/td&gt;
&lt;td&gt;Phasellus ultricies, sapien non euismod aliquam, dui ligula tincidunt odio, at accumsan nulla sapien eget ex.&lt;/td&gt;
&lt;td&gt;Proin eleifend dictum ipsum, non euismod ipsum pulvinar et. Vivamus sollicitudin, quam in pulvinar aliquam, metus elit pretium purus&lt;/td&gt;
&lt;td&gt;Proin sit amet velit nec enim imperdiet vehicula.&lt;/td&gt;
&lt;td&gt;Ut bibendum vestibulum quam, eu egestas turpis gravida nec&lt;/td&gt;
&lt;td&gt;Sed scelerisque nec turpis vel viverra. Vivamus vitae pretium sapien&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id="code-blocks"&gt;Code Blocks
&lt;/h2&gt;&lt;h3 id="code-block-with-backticks"&gt;Code block with backticks
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt; 1
&lt;/span&gt;&lt;span class="lnt"&gt; 2
&lt;/span&gt;&lt;span class="lnt"&gt; 3
&lt;/span&gt;&lt;span class="lnt"&gt; 4
&lt;/span&gt;&lt;span class="lnt"&gt; 5
&lt;/span&gt;&lt;span class="lnt"&gt; 6
&lt;/span&gt;&lt;span class="lnt"&gt; 7
&lt;/span&gt;&lt;span class="lnt"&gt; 8
&lt;/span&gt;&lt;span class="lnt"&gt; 9
&lt;/span&gt;&lt;span class="lnt"&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-html" data-lang="html"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt; &lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;en&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;meta&lt;/span&gt; &lt;span class="na"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Example HTML5 Document&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Test&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="code-block-indented-with-four-spaces"&gt;Code block indented with four spaces
&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;&amp;lt;!doctype html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta charset=&amp;quot;utf-8&amp;quot;&amp;gt;
&amp;lt;title&amp;gt;Example HTML5 Document&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;p&amp;gt;Test&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id="diff-code-block"&gt;Diff code block
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;span class="lnt"&gt;4
&lt;/span&gt;&lt;span class="lnt"&gt;5
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[dependencies.bevy]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git = &amp;#34;https://github.com/bevyengine/bevy&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rev = &amp;#34;11f52b8c72fc3a568e8bb4a4cd1f3eb025ac2e13&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;- features = [&amp;#34;dynamic&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ features = [&amp;#34;jpeg&amp;#34;, &amp;#34;dynamic&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h3 id="one-line-code-block"&gt;One line code block
&lt;/h3&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-html" data-lang="html"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;A paragraph&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;p&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="list-types"&gt;List Types
&lt;/h2&gt;&lt;h3 id="ordered-list"&gt;Ordered List
&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;First item&lt;/li&gt;
&lt;li&gt;Second item&lt;/li&gt;
&lt;li&gt;Third item&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id="unordered-list"&gt;Unordered List
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;List item&lt;/li&gt;
&lt;li&gt;Another item&lt;/li&gt;
&lt;li&gt;And another item&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="nested-list"&gt;Nested list
&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;Fruit
&lt;ul&gt;
&lt;li&gt;Apple&lt;/li&gt;
&lt;li&gt;Orange&lt;/li&gt;
&lt;li&gt;Banana&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Dairy
&lt;ul&gt;
&lt;li&gt;Milk&lt;/li&gt;
&lt;li&gt;Cheese&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="other-elements--abbr-sub-sup-kbd-mark"&gt;Other Elements ‚Äî abbr, sub, sup, kbd, mark
&lt;/h2&gt;&lt;p&gt;&lt;abbr title="Graphics Interchange Format"&gt;GIF&lt;/abbr&gt; is a bitmap image format.&lt;/p&gt;
&lt;p&gt;H&lt;sub&gt;2&lt;/sub&gt;O&lt;/p&gt;
&lt;p&gt;X&lt;sup&gt;n&lt;/sup&gt; + Y&lt;sup&gt;n&lt;/sup&gt; = Z&lt;sup&gt;n&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;Press &lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;ALT&lt;/kbd&gt; + &lt;kbd&gt;Delete&lt;/kbd&gt; to end the session.&lt;/p&gt;
&lt;p&gt;Most &lt;mark&gt;salamanders&lt;/mark&gt; are nocturnal, and hunt for insects, worms, and other small creatures.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;The above quote is excerpted from Rob Pike&amp;rsquo;s &lt;a class="link" href="https://www.youtube.com/watch?v=PAAkCSZUG1c" target="_blank" rel="noopener"
&gt;talk&lt;/a&gt; during Gopherfest, November 18, 2015.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Image gallery</title><link>https://quanghugo.pages.dev/p/image-gallery/</link><pubDate>Tue, 26 Aug 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/image-gallery/</guid><description>&lt;img src="https://quanghugo.pages.dev/p/image-gallery/2.jpg" alt="Featured image of post Image gallery" /&gt;&lt;p&gt;Hugo supports the creation of interactive image galleries using Markdown. It&amp;rsquo;s powered by &lt;a class="link" href="https://photoswipe.com/" target="_blank" rel="noopener"
&gt;PhotoSwipe&lt;/a&gt; and its syntax was inspired by &lt;a class="link" href="https://typlog.com/" target="_blank" rel="noopener"
&gt;Typlog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To use this feature, the image must be in the same directory as the Markdown file, as it uses Hugo&amp;rsquo;s page bundle feature to read the dimensions of the image. &lt;strong&gt;External images are not supported.&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id="syntax"&gt;Syntax
&lt;/h2&gt;&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;![&lt;span class="nt"&gt;Image 1&lt;/span&gt;](&lt;span class="na"&gt;1.jpg&lt;/span&gt;) ![&lt;span class="nt"&gt;Image 2&lt;/span&gt;](&lt;span class="na"&gt;2.jpg&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="result"&gt;Result
&lt;/h2&gt;&lt;p&gt;&lt;img src="https://quanghugo.pages.dev/p/image-gallery/1.jpg"
width="2000"
height="1400"
srcset="https://quanghugo.pages.dev/p/image-gallery/1_hu_32a169d2afcbcc04.jpg 480w, https://quanghugo.pages.dev/p/image-gallery/1_hu_3a73c825de3f86b8.jpg 1024w"
loading="lazy"
alt="Image 1"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="342px"
&gt; &lt;img src="https://quanghugo.pages.dev/p/image-gallery/2.jpg"
width="1500"
height="2250"
srcset="https://quanghugo.pages.dev/p/image-gallery/2_hu_2a56812cdca2c35e.jpg 480w, https://quanghugo.pages.dev/p/image-gallery/2_hu_70fe5bdaa5eb1f20.jpg 1024w"
loading="lazy"
alt="Image 2"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="160px"
&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@mymind" target="_blank" rel="noopener"
&gt;mymind&lt;/a&gt; and &lt;a class="link" href="https://unsplash.com/@lukechesser" target="_blank" rel="noopener"
&gt;Luke Chesser&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>Shortcodes</title><link>https://quanghugo.pages.dev/p/shortcodes/</link><pubDate>Mon, 25 Aug 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/shortcodes/</guid><description>&lt;img src="https://quanghugo.pages.dev/p/shortcodes/cover.jpg" alt="Featured image of post Shortcodes" /&gt;&lt;p&gt;For more details, check out the &lt;a class="link" href="https://stack.jimmycai.com/writing/shortcodes" target="_blank" rel="noopener"
&gt;documentation&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="bilibili-video"&gt;Bilibili video
&lt;/h2&gt;
&lt;div class="video-wrapper"&gt;
&lt;iframe src="https://player.bilibili.com/player.html?as_wide=1&amp;amp;high_quality=1&amp;amp;page=1&amp;bvid=BV1d4411N7zD"
scrolling="no"
frameborder="no"
framespacing="0"
allowfullscreen="true"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2 id="tencent-video"&gt;Tencent video
&lt;/h2&gt;
&lt;div class="video-wrapper"&gt;
&lt;iframe src="https://v.qq.com/txp/iframe/player.html?vid=g0014r3khdw&amp;auto=0"
scrolling="no"
frameborder="no"
framespacing="0"
allowfullscreen="true"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2 id="youtube-video"&gt;YouTube video
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;iframe loading="lazy"
src="https://www.youtube.com/embed/0qwALOOvUik"
allowfullscreen
title="YouTube Video"
&gt;
&lt;/iframe&gt;
&lt;/div&gt;
&lt;h2 id="generic-video-file"&gt;Generic video file
&lt;/h2&gt;&lt;div class="video-wrapper"&gt;
&lt;video
controls
src="https://www.w3schools.com/tags/movie.mp4"
&gt;
&lt;p&gt;
Your browser doesn't support HTML5 video. Here is a
&lt;a href="https://www.w3schools.com/tags/movie.mp4"&gt;link to the video&lt;/a&gt; instead.
&lt;/p&gt;
&lt;/video&gt;
&lt;/div&gt;
&lt;h2 id="gist"&gt;Gist
&lt;/h2&gt;&lt;script src="https://gist.github.com/CaiJimmy/e2751a943de10b2a5b3a8a6c2120cb86.js"&gt;&lt;/script&gt;
&lt;h2 id="gitlab"&gt;GitLab
&lt;/h2&gt;&lt;script
type="application/javascript"
src="https://gitlab.com/-/snippets/2589724.js"
&gt;&lt;/script&gt;
&lt;h2 id="quote"&gt;Quote
&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&lt;/p&gt;&lt;span class="cite"&gt;&lt;span&gt;‚Äï &lt;/span&gt;&lt;span&gt;A famous person, &lt;/span&gt;&lt;a href="https://en.wikipedia.org/wiki/Book"&gt;&lt;cite&gt;The book they wrote&lt;/cite&gt;&lt;/a&gt;&lt;/span&gt;&lt;/blockquote&gt;
&lt;hr&gt;
&lt;blockquote&gt;
&lt;p&gt;Photo by &lt;a class="link" href="https://unsplash.com/@codioful" target="_blank" rel="noopener"
&gt;Codioful&lt;/a&gt; on &lt;a class="link" href="https://unsplash.com/photos/WDSN62Qdxuk" target="_blank" rel="noopener"
&gt;Unsplash&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>Math Typesetting</title><link>https://quanghugo.pages.dev/p/math-typesetting/</link><pubDate>Sun, 24 Aug 2025 00:00:00 +0000</pubDate><guid>https://quanghugo.pages.dev/p/math-typesetting/</guid><description>&lt;p&gt;Stack has built-in support for math typesetting using &lt;a class="link" href="https://katex.org/" target="_blank" rel="noopener"
&gt;KaTeX&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;It&amp;rsquo;s not enabled by default side-wide,&lt;/strong&gt; but you can enable it for individual posts by adding &lt;code&gt;math: true&lt;/code&gt; to the front matter. Or you can enable it side-wide by adding &lt;code&gt;math = true&lt;/code&gt; to the &lt;code&gt;params.article&lt;/code&gt; section in &lt;code&gt;config.toml&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="inline-math"&gt;Inline math
&lt;/h2&gt;&lt;p&gt;This is an inline mathematical expression: $\varphi = \dfrac{1+\sqrt5}{2}= 1.6180339887‚Ä¶$&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$\varphi = \dfrac{1+\sqrt5}{2}= 1.6180339887‚Ä¶$
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h2 id="block-math"&gt;Block math
&lt;/h2&gt;$$
\varphi = 1+\frac{1} {1+\frac{1} {1+\frac{1} {1+\cdots} } }
$$&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$$
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; \varphi = 1+\frac{1} {1+\frac{1} {1+\frac{1} {1+\cdots} } }
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$$
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;$$
f(x) = \int_{-\infty}^\infty\hat f(\xi)\,e^{2 \pi i \xi x}\,d\xi
$$&lt;div class="highlight"&gt;&lt;div class="chroma"&gt;
&lt;table class="lntable"&gt;&lt;tr&gt;&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code&gt;&lt;span class="lnt"&gt;1
&lt;/span&gt;&lt;span class="lnt"&gt;2
&lt;/span&gt;&lt;span class="lnt"&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class="lntd"&gt;
&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$$
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; f(x) = \int_{-\infty}^\infty\hat f(\xi)\,e^{2 \pi i \xi x}\,d\xi
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$$
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description></item></channel></rss>